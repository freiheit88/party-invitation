<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sean‚Äôs Party Invitation ¬∑ tuned in A</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-shell">

    <!-- ===========================
         Scene -1: Pre-intro
         =========================== -->
    <section id="scene-preintro" class="scene scene-visible">
      <video
        class="preintro-video scene-video"
        autoplay
        muted
        loop
        playsinline
        poster="picture/preintro_fog_poster.jpg"
      >
        <source src="media/preintro_fogged_glass_loop.mp4" type="video/mp4" />
      </video>

      <div id="preintroOverlay" class="preintro-overlay"></div>

      <div id="preintroPopup" class="preintro-popup">
        <div class="preintro-inner">
          <p class="preintro-eyebrow">Alte Oper, Frankfurt ¬∑ tuning room</p>
          <h1 class="preintro-title">
            Let your fingers arrive first.
          </h1>
          <p class="preintro-copy">
            Before the strings tune in A, let this small screen be the first thing to step inside.
          </p>
          <button
            id="preintroTouchBtn"
            class="preintro-btn"
            type="button"
            aria-label="Begin the invitation"
          >
            Press to begin
          </button>
          <p class="preintro-note">
            Tap once to wake the room,<br />
            then again when the water clears.
          </p>
        </div>
      </div>

      <button
        id="preintroRipple"
        class="preintro-ripple"
        type="button"
        aria-label="Continue to the sideways prelude scene"
      >
        <span class="preintro-ripple-label">Click again!</span>
      </button>
    </section>

    <!-- ===========================
         Scene 0: Prelude (rotated)
         =========================== -->
    <section id="scene-prelude" class="scene">
      <div class="prelude-viewport">
        <video
          class="prelude-video"
          autoplay
          muted
          loop
          playsinline
          poster="picture/prelude_sideways_poster.jpg"
        >
          <source src="media/prelude_sideways_room_loop.mp4" type="video/mp4" />
        </video>

        <div class="prelude-gradient"></div>

        <!-- Rotated UI overlay -->
        <div class="prelude-ui">
          <header class="prelude-header">
            <p class="prelude-eyebrow">Prelude ¬∑ sideways room</p>
            <h2 class="prelude-title">
              Rotate your world<br />
              before the orchestra tunes.
            </h2>
          </header>

          <p class="prelude-status" id="preludeVoiceStatus">
            Voices: waiting for the room to settle‚Ä¶
          </p>

          <div class="prelude-language-wrapper">
            <p class="prelude-language-label">
              Select the language the room will gently switch to:
            </p>

            <!-- Before rotation: stacked EN (top) / DE (bottom).
                 After rotation: these appear left / right. -->
            <div class="prelude-language-zones">
              <button
                class="prelude-zone prelude-zone-left"
                type="button"
              >
                <span class="prelude-zone-eyebrow">Tap here</span>
                <span class="prelude-zone-main">Switch softly to English</span>
                <span class="prelude-zone-sub">
                  The room will rephrase itself into EN after a gentle line.
                </span>
              </button>

              <button
                class="prelude-zone prelude-zone-right"
                type="button"
              >
                <span class="prelude-zone-eyebrow">Oder hier</span>
                <span class="prelude-zone-main">Sanft ins Deutsche wechseln</span>
                <span class="prelude-zone-sub">
                  Der Raum legt eine kleine Zeile dazwischen ‚Äì dann wird alles DE.
                </span>
              </button>
            </div>
          </div>

          <!-- Rotated ‚ÄúSelect the language‚Äù bar (now acts like a bottom bar) -->
          <div class="prelude-tag">
            Select the language ¬∑ then let the orchestra game listen.
          </div>
        </div>
      </div>
    </section>

    <!-- ===========================
         Scene 1: Main Invitation
         =========================== -->
    <section id="scene-main" class="scene">
      <header class="top-bar">
        <div class="brand">
          <span class="brand-mark">A</span>
          <span class="brand-text">Sean‚Äôs Party Invitation ¬∑ tuned in A</span>
        </div>
        <button
          id="musicPill"
          class="music-pill"
          type="button"
          aria-label="Toggle invitation music"
        >
          <span id="musicPillIcon" class="music-pill-icon">‚ô™</span>
          <span id="musicPillLabel" class="music-pill-label">
            Music is sleeping
          </span>
        </button>
      </header>

      <main class="layout">
        <!-- LEFT: Hero / tuning column -->
        <section class="hero-column">
          <div class="hero-card">
            <div class="hero-video-frame">
              <video
                class="hero-video"
                autoplay
                muted
                loop
                playsinline
                poster="picture/hero_poster.jpg"
              >
                <source src="media/hero_orchestra_loop.mp4" type="video/mp4" />
              </video>
              <div id="heroGlow" class="hero-glow"></div>
              <div class="hero-caption-container">
                <p class="hero-caption hero-caption-visible">
                  Every orchestra in the world tunes in A.<br />
                  This night lets your phone tune as well.
                </p>
                <p class="hero-caption">
                  Think of this invitation as your own tiny concertmaster:
                  one tap and it rings A for you.
                </p>
                <p class="hero-caption">
                  Let the room hear that you‚Äôve arrived, one gentle harmonic at a time.
                </p>
              </div>
              <div class="hero-dots" id="heroDots"></div>
            </div>

            <div class="hero-body">
              <header class="hero-header">
                <p class="hero-eyebrow">Alte Oper ¬∑ Frankfurt</p>
                <h1 class="hero-title">
                  A small party,<br />
                  tuned like a big orchestra.
                </h1>
              </header>

              <section class="hero-tuning">
                <div class="tuning-role">
                  <p class="tuning-label">You‚Äôll be tuning as</p>
                  <p class="tuning-role-main">
                    <span id="instrumentLabel">Cellos</span>
                    <span id="instrumentEmoji" class="tuning-role-emoji">üéª</span>
                  </p>
                </div>

                <button
                  id="tuneButton"
                  class="tune-btn"
                  type="button"
                  aria-label="Let A ring for your instrument"
                >
                  <span class="tune-btn-main">Let A ring</span>
                  <span class="tune-btn-sub">
                    Tap once. The orchestra ducks, your role rings out in A.
                  </span>
                  <span id="tuneIcons" class="tune-icons">
                    <span class="tune-icon">A</span>
                  </span>
                </button>

                <p id="ownedInstrumentsHint" class="owned-hint">
                  Each harmonic your friends unlock will add another instrument to your pocket orchestra.
                </p>
              </section>
            </div>
          </div>
        </section>

        <!-- RIGHT: Tabs column -->
        <section class="tabs-column">
          <div class="tabs-card">
            <div class="tabs">
            <button class="tab-btn active" data-tab="invitation">Invitation</button>
            <button class="tab-btn hidden" data-tab="howto">How to start</button>
            <button class="tab-btn hidden" data-tab="board">Board</button>
            <button class="tab-btn" data-tab="orchestra">Orchestra game</button>
          </div>

          <main class="tab-container">
            <!-- Invitation TAB -->
            <section id="tab-invitation" class="tab-panel active">
              <header class="inv-header">
                <h1 class="title">
                  <span class="accent">Sean‚Äôs tuned-in-A evening</span><br />
                  at Alte Oper, Frankfurt
                </h1>
                <p class="subtitle">
                  A small group of friends, one hall, and one shared A before we start.
                </p>
              </header>

              <div class="inv-grid">
                <section class="inv-block">
                  <h2 class="block-title">When</h2>
                  <p class="block-body">
                    <strong>Date:</strong> [Fill in your date here]<br />
                    <strong>Time:</strong> Doors open ¬∑ [time]<br />
                    We‚Äôll start tuning our phones in A shortly after.
                  </p>
                </section>

                <section class="inv-block">
                  <h2 class="block-title">Where</h2>
                  <p class="block-body">
                    <strong>Location:</strong> Alte Oper, Frankfurt am Main<br />
                    Exact room &amp; entrance details will appear here closer to the date.
                  </p>
                </section>

                <section class="inv-block">
                  <h2 class="block-title">Dress code</h2>
                  <p class="block-body">
                    Think ‚ÄúI accidentally joined an orchestra‚Äù‚Ä¶ but in your own style.<br />
                    Black is welcome, colour is welcome, the only rule is: you should feel like yourself.
                  </p>
                </section>

                <section class="inv-block">
                  <h2 class="block-title">What will happen</h2>
                  <p class="block-body">
                    We‚Äôll meet, talk, and let a small shared ritual happen:
                    everyone‚Äôs phone will ring one A,
                    one by one, until the room feels like a tuning orchestra.
                  </p>
                </section>
              </div>

              <footer class="inv-footer">
                <p>
                  If you‚Äôre reading this, you‚Äôre already part of the score.<br />
                  Bring your curiosity, maybe one friend, and an ear for A.
                </p>
              </footer>
            </section>

            <!-- How to start TAB (temporarily hidden) -->
            <section id="tab-howto" class="tab-panel hidden">
              <header class="inv-header">
                <h1 class="title">
                  <span class="accent">How to start</span>
                  Alte Oper ¬∑ tuning in A
                </h1>
              </header>

              <ol class="howto-steps">
                <li>
                  <strong>Step 1:</strong> Arrive at the hall and find Sean or the small group around him.
                </li>
                <li>
                  <strong>Step 2:</strong> Open this page on your phone and make sure your sound is on.
                </li>
                <li>
                  <strong>Step 3:</strong> Check which instrument role you got. Tap
                  <em>‚ÄúLet A ring‚Äù</em> when it‚Äôs your turn.
                </li>
                <li>
                  <strong>Step 4:</strong> Listen to the way the room reacts when everyone‚Äôs A has passed through.
                </li>
              </ol>

              <p class="note">
                If something breaks or feels confusing, that‚Äôs part of the experimental charm.
                Just wave your phone like a tiny baton and we‚Äôll fix it together.
              </p>
            </section>

            <!-- Board TAB (temporarily hidden) -->
            <section id="tab-board" class="tab-panel hidden">
              <div class="board-wrapper">
                <header class="inv-header">
                  <h1 class="title">
                    <span class="accent">Board</span><br />
                    Tiny post-its for the evening
                  </h1>
                </header>

                <ul class="board-list">
                  <li>
                    <strong>Open slots:</strong> If you want to bring someone,
                    write their name here once Sean confirms.
                  </li>
                  <li>
                    <strong>Ideas:</strong> A short piece you‚Äôd like to hear in A?
                    A small ritual you‚Äôd love to try? Add it here.
                  </li>
                  <li>
                    <strong>Notes to future you:</strong> What would you like to remember about this night?
                  </li>
                </ul>
              </div>
            </section>

            <!-- Orchestra Game TAB -->
            <section id="tab-orchestra" class="tab-panel">
              <header class="inv-header">
                <h1 class="title">
                  <span class="accent">Orchestra game</span><br />
                  Unlock harmonics by standing together
                </h1>
                <p class="subtitle">
                  Your phone can ‚Äúlisten‚Äù to how close you are to the others.
                  Stand in small clusters and see what unlocks.
                </p>
              </header>

              <section class="orch-section">
                <h2 class="block-title">Your mode</h2>
                <p id="orchestraMode" class="block-body">
                  Waiting for location permission‚Ä¶
                </p>
              </section>

              <section class="orch-section">
                <h2 class="block-title">Your coordinates</h2>
                <p id="myCoords" class="coords">‚Äì, ‚Äì</p>
              </section>

              <section class="orch-section">
                <h2 class="block-title">Distances to others</h2>
                <p class="block-body">
                  Once everyone joins, you‚Äôll see rough distances here (in meters).
                  Get closer to unlock more instruments.
                </p>
                <div id="distanceList" class="distance-list">
                  <!-- Filled dynamically -->
                </div>
              </section>

              <section class="orch-section">
                <h2 class="block-title">Unlocked instruments</h2>
                <ul id="ownedInstrumentsList" class="owned-list">
                  <!-- Filled dynamically -->
                </ul>
              </section>

              <section class="orch-section">
                <button
                  id="orchestraJoinBtn"
                  class="join-btn"
                  type="button"
                >
                  Join the orchestra game
                </button>
              </section>

              <div id="orchestraPopup" class="orch-popup hidden" role="dialog" aria-modal="true">
                <div class="orch-popup-inner">
                  <h2 class="orch-popup-title">Location &amp; harmonics</h2>
                  <p class="orch-popup-body">
                    The game uses your coarse location inside the hall
                    to estimate distances between you and others.
                    It doesn‚Äôt store exact coordinates anywhere permanent.
                  </p>
                  <button
                    id="orchestraPopupClose"
                    class="orch-popup-close"
                    type="button"
                  >
                    Okay, let‚Äôs play
                  </button>
                </div>
              </div>
            </section>
          </main>

          <footer class="tabs-footer">
            <p class="footer-copy">
              This is a tiny one-page instrument:
              it tunes, it listens, and then bows a little whenever your own A begins to ring.
            </p>
          </footer>
        </div>
      </section>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
